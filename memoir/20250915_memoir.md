# 2025년 9월 15일 반띵 회고록




이전까지는 기본적인 백엔드 설정 파일만 작성하고 제대로 로그인, 회원가입 기능을 구현하지 않았다.
하지만 이번 주말부터는 본격적인 백엔드 기능 구현이 시작되었다.
이전 팀프로젝트를 진행할 때에는 목록을 렌더링, 필터링, 검색, 정렬하는 기능을 맡았었는데,
처음부터 끝까지 처음 직접 만들다보니 수월하게 진행하진 못했었지만,
아무래도 수업때 제일 많이 했었던 기능이다보니 나름 수월하게 진행했던것같다.

이번에 프로젝트를 시작할 때에는 좀 더 어려운 기능을 맡아보고싶었고,
기능 분담을 할 때 제일 어려운 기능인 로그인/회원가입을 맡아보겠다고 어필하고, 맡게 되었다.

근데 주말에 백엔드 구현을 시작할 때 소셜 로그인에 대해 공부했었지만
막상 혼자 만들려고 하니 무엇부터 시작할지 막막했었다.


처음에는 JWT 토큰 생성과 검증, 이후에는 http-only 쿠키를 이용해서 토큰 관리,
이후 OAuth2를 사용한 카카오 SSO, JWT 인증 필터를 만들고
`SecurityConfig`의 필터 체인에 등록하고, 토큰 재발급과 로그아웃을 위해
REST API도 작성했다.

지금 이렇게 줄여서 말해보니 짧게 느껴지지만, 기능 하나하나를 만들때마다 관련 자료들을
많이 찾아봤던것같다.

내가 올바르게 개발하고있는지 계속해서 로직을 점검하다보니 생각하는 힘이 길러졌고,
다음에도 인증과 관련된 기능을 맡아도 잘 구현해낼수 있겠다는 자신감이 커졌다.

카카오 SSO 기능을 구현하고나서 테스트를 위해
직접 카카오 로그인을 진행하고, DB의 사용자 정보에 데이터가 들어갔을 때를 생각하면 아직도 짜릿하다.



주말동안 작성한 내용들을 확인하고, 합치기위해서 아래와 같은 PR을 진행했다.

```text
[Feat]: [BE] 카카오 소셜 로그인 + JWT 인증/토큰 관리/로그아웃 기능 구현 (#19, #20, #21, #23)

# 🚀 Pull Request

---

## PR 유형 (Type of PR)
> 해당하는 항목에 `x` 표기해주세요.
- [x] **신규 기능 (New Feature)**
- [ ] **버그 수정 (Bug Fix)**
- [ ] **리팩토링 (Refactoring)**
- [ ] 문서 수정 (Update Docs)
- [ ] 기타 (Chore)

---

## PR 요약 (PR Summary)
> 이 PR이 어떤 변경을 했는지 간단히 설명해주세요.

- 카카오 소셜 로그인(SSO)과 JWT 기반 인증 체계를 구축했습니다.
- JWT 토큰 발급/검증, HTTP-Only 쿠키 관리, JWT 인증 필터, 카카오 OAuth2 로그인 연동, 토큰 재발급 및 로그아웃 기능을 구현하여 스테이트리스 인증 흐름을 완성했습니다.

---

## 관련 이슈 (Related Issue)
> 이 PR과 연결된 이슈 번호가 있다면 작성해주세요.

- Closes #19 
- Closes #20 
- Closes #21 
- Closes #23 

---

## 변경 사항 (Changes)
> 변경된 파일 목록과 주요 내용을 구체적으로 적어주세요.

### JWT 토큰 관리 (#19)  
- `JwtTokenProvider` 유틸 클래스 추가 (토큰 생성, 검증, Claims 파싱)  
- Access/Refresh Token 발급 및 SecretKey 초기화 로직 구현  
- JWT 관련 설정값 `application.yml`에 추가  

### HTTP-Only 쿠키 관리 (#20)  
- `CookieProperties` 클래스 추가로 yml 매핑  
- `CookieUtil` 유틸 클래스 구현 (생성, 삭제, 조회, 빌더)  
- Access/Refresh Token을 HTTP-Only 쿠키로 안전하게 관리  

### 카카오 소셜 로그인 & JWT 인증 필터 (#21)  
- `JwtAuthenticationFilter` 구현 및 `SecurityConfig`에 등록  
- `CustomOAuth2UserService` 구현: 카카오 사용자 DB 동기화 (기존 → 업데이트, 신규 → 저장)  
- `OAuth2SuccessHandler`, `OAuth2FailureHandler` 구현  
- `SecurityConfig`에서 OAuth2 로그인 활성화 및 엔드포인트 공개 설정  
- User 엔티티 및 Repository 수정 (OAuth 사용자 조회/프로필 업데이트)  

### 토큰 재발급 & 로그아웃 (#23)  
- `AuthController`에 `/api/auth/refresh`, `/api/auth/logout` 엔드포인트 추가  
- Refresh Token 검증 후 Access Token 재발급  
- 로그아웃 시 Access/Refresh 쿠키 삭제  

---

## 스크린샷 / 미리보기 (Preview)
> UI/UX 변경 사항이 있다면 스크린샷을 첨부해주세요.

테스트 URL
- http://localhost:9000/oauth2/authorization/kakao

<img width="1624" height="484" alt="image" src="https://github.com/user-attachments/assets/310ec9fb-7fa2-440d-82e3-7eaab115b352" />

---

## 셀프 체크리스트 (Self-Checklist)
- [x] 제목 규칙을 지켰습니다.
- [x] 관련 이슈를 연결했습니다.
- [x] 브랜치 전략을 준수했습니다.
- [x] 테스트 코드를 추가했거나, 기존 테스트가 모두 통과하는 것을 확인했습니다.

---

## 리뷰어에게 (To Reviewers)
> 리뷰 시 유의해야 할 부분, 확인이 필요한 특정 내용이 있다면 작성해주세요.

- 이번 PR은 **카카오 SSO + JWT 인증 전체 흐름**을 완성하는 핵심 기능입니다.
- 테스트 URL에 접속하여 회원가입 기능이 원활히 작동하는지 검토 부탁드립니다.
```



그리고, PR을 완료한 후 내가 작성한 내용들을 팀원들과 공유하면서
문서와도 동기화 하기위해 카카오 SSO API 명세서를 통해 
SSO에 대한 전반적 내용을 업데이트했다.

```text
Docs: 카카오 SSO API 명세서 업데이트 (#66)

# 📄 Documentation Pull Request


---

## PR 유형 (Type of PR)
> 해당하는 항목에 `x` 표기해주세요.
- [ ] 문서 추가 (New Docs)
- [x] 문서 수정 (Update Docs)
- [ ] 오타/형식 수정 (Fix Typo / Format)
- [ ] 기타 (Chore)

---

## PR 요약 (PR Summary)
> 이 PR이 어떤 문서에 어떤 변경을 했는지 간단히 설명해주세요.

- 카카오 로그인 도입에 따른 API 명세서 대대적 변경 및 확장
- JWT 토큰 인증 방식, 쿠키 사용 설정, 만료 시간 등 세부 내용 추가
- 주요 엔드포인트 정의 및 요청/응답 명세 정리
- 사용자 정보 구조, 토큰 갱신, 로그아웃, 에러 응답 형식 문서화
- 보안 고려사항(CORS, 쿠키 설정) 및 프론트엔드 통합 가이드 포함
- 변경 이력에 v1.0.2 추가 및 작성자 정보 수정

---

## 관련 이슈 (Related Issue)
> 이 PR과 연결된 이슈 번호가 있다면 작성해주세요.

- Closes #
- Resolves #66 

---

## 변경 사항 (Changes)
> 변경된 문서 목록과 주요 내용을 구체적으로 적어주세요.

- docs/architecture/api/kakao-sso-api-spec.md: 백엔드 카카오 SSO 개발 진행에 따라 토큰 전달 방식, 세부 사항 변경

---

## 스크린샷 / 미리보기 (Preview)
> 문서의 렌더링 결과나 다이어그램이 있다면 첨부해주세요.

(여기에 파일 첨부)

---

## 셀프 체크리스트 (Self-Checklist)
- [x] 제목 규칙을 지켰습니다.
- [x] 문서 빌드/렌더링 시 문제가 없습니다.
- [x] 맞춤법/링크 오류를 확인했습니다.
- [x] 관련 이슈를 연결했습니다.

---

## 리뷰어에게 (To Reviewers)
> 리뷰 시 유의해야 할 부분, 확인이 필요한 특정 내용이 있다면 작성해주세요.

(여기에 내용 작성)

```







