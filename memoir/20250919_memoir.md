# 2025년 9월 19일 반띵 회고록

## 📌 오늘의 경험

오늘은 **ProfilePage 구현과 중요한 보안 설정 오류 발견 및 해결**이라는 
두 가지 중요한 성과를 이뤄낸 의미 있는 하루였다.
프론트엔드에서는 **상태 기반 동적 UI 렌더링**의 매력을 깊이 체험했고,
백엔드에서는 **Spring Security 설정 오류로 인한 JWT 토큰 갱신 실패 문제**를 해결하면서
**보안 시스템의 기초 설정이 전체 인증 플로우에 미치는 결정적 영향**을 몸소 체감할 수 있었다.

---

## 💡 팀 회의와 최종 스프린트 전략

### 발표를 위한 마지막 개발 스프린트

**9월 23일 발표**를 앞두고 팀 회의에서 최종 개발 일정을 수립했다.

**확정된 일정:**
* **주말(20~21일)**: 모든 기능 완성을 목표로 집중 개발
* **월요일(22일)**: 통합 작업 및 기능 테스트
* **화요일(23일)**: 발표 자료 완성 및 변경 사항 문서 업데이트

**내 개발 목표:**
* **ProfilePage 완성**: 사용자별 모임 목록 조회 기능 안정화
* **약관 동의 페이지 구현**: 최초 로그인 시 법적 요구사항 충족을 위한 필수 플로우

→ **마지막 스프린트에서 완성도를 최대한 높이자**는 팀 전체의 의지가 모인 중요한 회의였다.

---

## 구현한 핵심 성과: ProfilePage 기반 구조 완성

### PR: [Feat] 프로필 페이지 및 헤더 UI 개선 (#60)

**사용자 중심의 마이페이지 경험**을 구현하기 위한 핵심 구조를 완성했다.

**주요 구현 사항:**

#### ProfilePage 컴포넌트 구조
* **MyInfo**: 사용자 기본 정보 표시 섹션
* **MyParticipatingGroups**: 승인된 참여 모임 목록
* **MyPendingGroups**: 승인 대기중인 모임 목록
* **상태별 모임 조회**: 사용자 버튼 클릭에 따라 `APPROVED` / `PENDING` 상태로 필터링

#### 동적 UI 렌더링 로직
* **useEffect와 상태 관리**: 페이지 변경이나 버튼 클릭에 따른 모임 목록 동적 로드
* **axios 기반 API 통신**: 서버와의 데이터 연동으로 실시간 모임 정보 표시
* **인증 검증**: 미인증 사용자는 자동으로 로그인 페이지로 리다이렉트

#### AppHeader UI 개선
* **스타일 파일 경로 정리**: `Layout/` → `Header/`로 구조 개선
* **프로필 섹션 네비게이션**: 클릭 시 `/profile/:id`로 자연스러운 이동
* **로그인/로그아웃 버튼**: 아이콘 기반으로 사용성 향상

→ **React의 상태 기반 UI 렌더링의 강력함**을 직접 체험하면서 프론트엔드 개발의 매력을 재발견했다.

---

## 핵심 트러블슈팅: Spring Security 설정 오류 해결

### 문제 상황: 5분마다 로그인이 풀리는 현상

**JWT 액세스 토큰 수명을 5분으로 설정**했음에도 불구하고,
자동 토큰 갱신 로직이 동작하지 않아 **사용자가 5분마다 로그인을 다시 해야 하는 심각한 문제**가 발생했다.

**디버깅 과정에서 발견한 핵심:**
* **예상**: 토큰 만료 시 401 Unauthorized → axios interceptor → 자동 토큰 갱신
* **실제**: 401이 아닌 다른 에러 발생 → 갱신 로직 미동작 → 로그인 세션 끊김

### 원인 분석: 개발 편의성이 부른 보안 허점

**SecurityConfig.java의 PUBLIC_ENDPOINTS 배열**을 검토한 결과, 
개발 편의를 위해 임시로 설정해둔 `"/**"` 패턴이 원인이었다.

```java
private static final String[] PUBLIC_ENDPOINTS = {
    "/**", // ❌ 모든 엔드포인트를 public으로 허용
    "/health",
    "/api/auth/**",
    // ... 기타 엔드포인트들
};
```

**문제 발생 메커니즘:**
1. **인증 필요 API 호출** → `/api/meetings/participated`
2. **Spring Security 처리** → `"/**"` 패턴 매칭으로 `permitAll()` 적용
3. **JWT 검증 생략** → 토큰 만료 여부와 관계없이 요청 허용
4. **401 에러 미발생** → axios interceptor 토큰 갱신 로직 실행되지 않음
5. **비즈니스 로직 에러** → 인증되지 않은 상태에서 사용자 정보 조회 실패

### 해결: 명시적 허용으로 보안 정책 복원

**개발 편의용 와일드카드 패턴을 제거**하고 실제 public 엔드포인트만 명시적으로 허용했다.

```java
private static final String[] PUBLIC_ENDPOINTS = {
    // "/**", // ❌ 제거
    "/",
    "/health", 
    "/h2-console/**",
    "/api/auth/**",
    "/api/meetings/search", // ✅ 실제 public 엔드포인트만 명시
    "/api/chatbot/**",
    "/media/**",
    "/images/**"
};
```

**해결 후 정상 플로우:**
1. **만료 토큰으로 API 요청** → Spring Security에서 정확한 401 응답
2. **axios interceptor 동작** → 401 감지하여 `AuthService.refresh()` 자동 실행
3. **토큰 갱신 성공** → 원래 요청 재시도 → 사용자는 중단 없이 서비스 이용

→ **트러블슈팅 문서**를 별도로 작성하여 팀원들과 공유했다.

---

## React 상태 관리의 깊은 이해

### useEffect와 상태 기반 렌더링의 매력

ProfilePage 구현 과정에서 **React의 상태 기반 UI 업데이트**를 직접 체험하면서 큰 깨달음을 얻었다.

**구현한 동적 렌더링:**
* **버튼 클릭** → 상태 변경 → **useEffect 트리거** → **API 호출** → **모임 목록 업데이트**
* **페이지 진입** → 초기 상태 설정 → **자동 데이터 로드** → **UI 렌더링**

**React 학습의 전환점:**
* **처음**: 상태 변화가 난해하고 복잡해 보였음
* **현재**: **React의 핵심 장점이자 매력**임을 완전히 이해
* **깨달음**: 상태 변경만으로 복잡한 UI 업데이트를 자동화할 수 있는 강력함

---

## axios 기반 API 통신 학습 성과

### API 응답 구조 분석과 데이터 핸들링

**axios를 통한 서버 통신**이 처음에는 익숙하지 않았지만, 
**로그를 찍어가며 단계별로 분석**하여 완전히 이해할 수 있었다.

**학습 과정:**
1. **API 응답 구조 파악** → `console.log`로 데이터 형식 확인
2. **상태별 데이터 처리** → `APPROVED` / `PENDING` 모임 구분 로직
3. **에러 처리** → 네트워크 오류나 서버 에러 시 사용자 피드백
4. **로딩 상태** → API 호출 중 사용자 경험 개선

**성과:**
* **상태 변화에 따른 서로 다른 모임 목록 조회** 기능 완성
* **프론트엔드-백엔드 연동**에 대한 실무적 이해 향상

---

## 오늘의 성과와 깨달음

### 보안 설정의 절대적 중요성

**아무리 완벽한 JWT 인증 로직과 토큰 갱신 시스템**을 구축해도, 
**Spring Security 기본 설정이 잘못되면 모든 것이 무의미**해진다는 교훈을 얻었다.
특히 **개발 편의를 위한 임시 설정이 실제 보안 로직을 우회**시키는 
상황을 직접 경험하면서, **보안 시스템에서 기초 설정의 중요성**을 뼈저리게 느꼈다.

### React 상태 관리의 핵심 이해

ProfilePage 구현을 통해 **React의 상태 기반 렌더링 패러다임**을 완전히 체득했다.
**useEffect, useState, API 통신, 동적 UI 업데이트**의 
전체적인 흐름이 하나로 연결되면서, **React 개발자로서의 기반**이 튼튼해졌다.

### 체계적 트러블슈팅 경험

**문제 발생 → 원인 분석 → 해결책 도출 → 문서화 및 공유**라는 
완전한 트러블슈팅 사이클을 경험하면서, 
**실무 개발자로서의 문제 해결 역량**이 크게 향상되었다.

---

## 주말 개발에 대한 각오

### ProfilePage 완전 완성

**20~21일 주말 동안 ProfilePage의 모든 기능을 완성**하여 
사용자가 자신의 모임 참여 현황을 완벽하게 조회할 수 있도록 구현할 계획이다.
특히 **페이징 처리, 에러 핸들링, 로딩 상태 표시** 등 실제 서비스 수준의 완성도를 목표로 한다.

### 약관 동의 페이지 도전

**법적 요구사항을 충족하는 약관 동의 플로우**를 구현하여 
**최초 로그인 시 사용자로부터 약관 동의를 받는 완전한 회원가입 로직**을 완성하고 싶다.
9월 10일 법적 리스크 검토 문서 작성 때부터 고민해왔던 부분을 실제 코드로 구현하는 것이 목표다.

---

## 느낀 점

* **Spring Security 설정 오류 트러블슈팅**을 통해 **보안 시스템의 기초 설정이 전체 아키텍처에 미치는 절대적 영향**을 깨달았다.
* **React 상태 관리 학습**에서 **처음의 어려움을 극복하고 핵심 매력을 발견**하는 과정이 개발자 성장의 전형적인 패턴임을 체험했다.
* **axios 기반 API 통신**을 완전히 이해하면서 **프론트엔드-백엔드 연동에 대한 실무적 역량**이 크게 향상되었다.
* **체계적인 트러블슈팅과 문서화**가 **개인의 성장뿐만 아니라 팀 전체의 학습**에 기여한다는 점을 실감했다.
* **발표를 앞둔 마지막 스프린트**에서 **완성도를 극대화하려는 의지**가 개발 동기부여와 집중력을 크게 향상시킨다는 것을 경험했다.