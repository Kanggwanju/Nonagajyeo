# 2025년 9월 18일 반띵 회고록




오늘 회의에선 내가 헤더, 로그인 페이지 등을 빠르게 끝내서
최초 약관 동의 페이지를 제작하려고 했지만, 
현재 자신이 참여한 모임 목록을 보는 방법이 없기에
기능적으로 필요한 마이 페이지를 분담하기로 정해졌다.

마이 페이지는 내 정보를 한 섹션으로 묶고,
내가 참여한 모임, 참여 승인 대기중인 모임 섹션 두가지로 나눠서 작성하기로 정했다.

모임 목록은 메인 페이지에 있는 모임 카드와 페이지네이션 컴포넌트를 이용해서
한 페이지에 최대 4개로 작성하기로 했다.

초기에 와이어프레임에서는 구현 방식에 대해 이정도로 자세하게 생각하진 못해서 아쉽지만,
앞으로 프로젝트를 계속해서 하다보면 초기 설계 단계에서도 디테일한 부분들을
캐치하고 설정해놓을 수 있겠다는 생각이 들었다.


DB에서 참여한 모임 목록을 불러오기 위한 백엔드 REST API를 먼저 작성했다.

처음에는 JPA로 DB에 접근해서 데이터를 불러오려고 했으나 테이블을 3개 조인해야해서
N+1 문제를 해결하는게 좀 어려워보였다.

이 문제를 해결하기 위해 그냥 JPA의
네이티브 쿼리를 사용해 데이터를 조회했고, 이와중에 문제가 생겼었다.

JPA의 네이티브 쿼리를 사용해 데이터를 조회하는건
Junit을 통한 테스트 케이스는 통과했지만, 
막상 포스트맨을 사용해서 내가 참여한 목록 API 요청을 했는데 분명
DB에는 내가 참여한 모임이 있었지만 없다고 뜨는 것이였다.

문제가 되었던 것은
내가 참여중인지의 상태값을 ENUM 형태로 받고 JPA의 네이티브 쿼리에
그대로 변수값을 넣어줬는데 JPA가 Enum의 이름(`'PENDING'`)이
아닌 Enum의 순서(`0`)로 인식하여 DB에 `application_status = 0`이라는 쿼리를 보냈다.

이것을 고치기위해 서비스 레이어에서 명시적으로 문자열로 변환하도록 코드를 수정했다.

이 부분은 스크린샷과 함께 jpa enum 트러블슈팅 문서로 작성했다.

이후에 내가 참여한 모임 API를 완성시키고 나서
참여 승인 대기중인 모임 API를 만들려고 보니까 만들수록 뭔가
이미 만들었던 API와 엄청 유사해보여서
내가 참여한 모임 API를 리팩토링하여 참여 승인 대기중인 모임 API 역할도 할 수 있게끔
리팩토링했다.
선생님이 늘 비슷한 코드가 있으면 리팩토링하는 과정을 가르쳐주셨었는데,
배운걸 토대로 비슷한 코드를 리팩토링 하겠다는 생각을 해낸게 정말 뿌듯했다. 













---

내가 작성한 PR

```text
[Feat]: [BE] 모임 조회 관련 기능 및 리팩토링 (#64)

# 🚀 Pull Request

---

## PR 유형 (Type of PR)
> 해당하는 항목에 `x` 표기해주세요.
- [x] **신규 기능 (New Feature)**
- [ ] 버그 수정 (Bug Fix)
- [ ] **리팩토링 (Refactoring)**
- [ ] 문서 수정 (Update Docs)
- [ ] 기타 (Chore)

---

## PR 요약 (PR Summary)
> 이 PR이 어떤 변경을 했는지 간단히 설명해주세요.

- 사용자가 참여한 모임 목록을 페이징 처리하여 조회하는 백엔드 API를 구현했습니다.
- 모임 조회 관련 로직을 특정 참여 상태(status)를 기준으로 필터링할 수 있도록 리팩토링했습니다.
- DTO 명칭을 더 명확하게 변경하고, `Meeting` 엔티티에 `@ToString exclude` 필드를 추가하여 코드의 유지보수성과 효율성을 높였습니다.

---

## 관련 이슈 (Related Issue)
> 이 PR과 연결된 이슈 번호가 있다면 작성해주세요.

- Resolves #64 

---

## 변경 사항 (Changes)
> 변경된 파일 목록과 주요 내용을 구체적으로 적어주세요.

### 신규 기능 추가
- 사용자가 참여한 모임 목록을 페이징 처리하여 조회하는 `getParticipatedMeetings` API 추가
- `MeetingsRepository`에 특정 사용자의 승인된/참여 모임 목록을 페이징으로 조회하는 메서드 추가
- `MeetingProfilePageResponse` DTO를 생성하여 페이징 응답 구조 정의

### 리팩토링 및 개선
- `MeetingParticipatedPageResponse` DTO를 `MeetingProfilePageResponse`로 리네이밍
- 기존 `findApprovedMeetingsWithMartByUserId` 메서드를 특정 상태(status) 필터를 적용한 메서드로 리팩토링
- `MeetingController`와 `FindMeetingService`에 상태 파라미터를 추가하여 모임 조회 로직 확장
- `Meeting` 엔티티의 `@ToString`에 순환 참조를 일으킬 수 있는 필드(`hostUser`, `mart`, `participants`, `suggestions`, `feedbacks`)를 `exclude` 처리

### 공통 개선
- `@Slf4j`를 사용해 메서드 호출 시 로깅 기능 추가

---

## 스크린샷 / 미리보기 (Preview)
> UI/UX 변경 사항이 있다면 스크린샷을 첨부해주세요.

(백엔드 기능 구현이므로 스크린샷은 없습니다)

---

## 셀프 체크리스트 (Self-Checklist)
- [x] 제목 규칙을 지켰습니다.
- [x] 관련 이슈를 연결했습니다.
- [x] 브랜치 전략을 준수했습니다.
- [x] 스타일 가이드 및 일관성을 검토했습니다.

---

## 리뷰어에게 (To Reviewers)
> 리뷰 시 유의해야 할 부분, 확인이 필요한 특정 내용이 있다면 작성해주세요.

- **모임 상태를 필터링하는 방식**과 **페이징 처리 로직**이 적절한지 검토 부탁드립니다.
- DTO 명칭을 `MeetingParticipatedPageResponse`에서 `MeetingProfilePageResponse`로 변경한 것에 대해 피드백 주시면 감사하겠습니다.
- `@ToString exclude`를 추가한 의도와 함께 다른 순환 참조 가능성이 있는 부분은 없는지 함께 확인해 주시면 좋습니다.
```







