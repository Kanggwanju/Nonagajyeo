
# 🟨 카카오 소셜 로그인 정리

## 1. 로그인 흐름 (REST API 방식)

카카오 로그인의 큰 흐름은 이렇게 돼요:

1. **사용자**가 "카카오 로그인" 버튼 클릭
2. **카카오 인증 서버**에서 로그인/동의 → `인가 코드 (Authorization Code)` 발급
3. **백엔드 서버**가 인가 코드로 카카오에 요청 → `Access Token` 발급
4. **백엔드 서버**가 Access Token으로 사용자 정보 조회
5. **백엔드 서버**에서 DB에 회원가입 or 로그인 처리
6. **백엔드 서버**가 자체 **JWT 발급 → 프론트에 전달**
7. **프론트**는 JWT 저장 후 로그인 상태 유지

👉 핵심 포인트: **Access Token은 백엔드에서만 다루고, 프론트는 JWT만 쓴다.**

---

## 2. 구현 방식 2가지

### ✅ 방식 1. Redirect → 프론트 (추천: 개발 편의성)

* 카카오 `redirect_uri`를 **프론트 주소**로 설정
* 프론트에서 `code`를 읽어서 백엔드에 전달 → 백엔드에서 토큰 교환
* 흐름:

  ```
  카카오 → 프론트 (code) → 백엔드 (토큰 요청) → 프론트 (JWT 응답)
  ```
* 장점: 프론트에서 직접 제어 가능, 디버깅 쉽다
* 단점: URL에 `code`가 보임 (보안상 아주 큰 문제는 아님, 단기/1회용 코드라 괜찮음)

---

### ✅ 방식 2. Redirect → 백엔드 (추천: 보안성)

* 카카오 `redirect_uri`를 **백엔드 주소**로 설정
* 백엔드에서 `code` 처리 → JWT 발급 → 프론트로 리다이렉트
* 흐름:

  ```
  카카오 → 백엔드 (code + 토큰 교환 + JWT 발급) → 프론트 리다이렉트
  ```
* 장점: 프론트는 code를 다루지 않아도 됨 → 보안적으로 안전
* 단점: 개발 편의성은 살짝 떨어짐

---

## 3. 다른 방식들

| 방식           | 사용 환경             | 보안성 | 특징                             |
| ------------ | ----------------- | --- | ------------------------------ |
| **REST API** | 웹(React+Spring 등) | 높음  | 서버에서 토큰 관리, JWT 발급 가능          |
| **JS SDK**   | 프론트 단독/데모용        | 낮음  | 서버 없이 빠르게 구현 가능하지만 실제 서비스엔 비추천 |
| **모바일 SDK**  | iOS, Android 앱    | 높음  | 카카오톡 연동 UX, 앱 최적화              |

---

## 4. 인가 코드(URL 노출) 보안 이슈

* 인가 코드는 **짧은 수명(보통 5분)** + **1회용** → 큰 위험은 아님
* 다만 URL에 남을 수 있어서

    * 브라우저 히스토리에 기록될 수 있고
    * 서버 로그에 찍힐 수 있음
* **Access Token / Refresh Token**은 절대 URL에 노출하면 안 됨
* 권장: 인가 코드는 프론트에서 받더라도, **토큰 교환은 반드시 백엔드에서 처리**

---

## ✅ 결론

* 우리 팀처럼 **웹 서비스(React + Spring Boot)** → **REST API 방식이 정석**
* **방식 1**: 개발 편의성 위주 (MVP 단계에 좋음)
* **방식 2**: 보안성 강화 (실서비스 단계에서 권장)
* 인가 코드가 URL에 보이는 건 OAuth2 기본 설계, 치명적이지 않음

